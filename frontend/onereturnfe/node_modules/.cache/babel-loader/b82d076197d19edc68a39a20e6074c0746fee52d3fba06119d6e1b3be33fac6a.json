{"ast":null,"code":"import _slicedToArray from\"C:/Users/Jackson/Desktop/OR-Localsave/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import Cookies from\"js-cookie\";import\"./wallet.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Invoice=function Invoice(){var _invoices$;var _useParams=useParams(),invoiceID=_useParams.invoiceID;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),invoices=_useState2[0],setInvoices=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),historyPage=_useState4[0],setPage=_useState4[1];var data;try{data=JSON.parse(Cookies.get('data'));}catch(e){console.log(\"error parsing cookie: \",e);data={};}var editReceipt=function editReceipt(action,invoiceID,recipientID){var sharedWith=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var itemName=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';var returner=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'';var token=Cookies.get('token');console.log(sharedWith);axios.post('https://onereturn.com/userapi/edit/',{action:action,invoiceID:invoiceID,recipientID:recipientID,sharedWith:sharedWith,itemName:itemName,returner:returner},{headers:{Authorization:\"Token \".concat(token)}}).then(function(response){console.log(response);fetchData();console.log(\"current version updated\");}).catch(function(error){console.error('error: ',error);});};var fetchData=function fetchData(){var token=Cookies.get('token');axios.get('https://onereturn.com/userapi/get/',{params:{type:'SINGLE',query:invoiceID},headers:{'Authorization':\"Token \"+token}}).then(function(response){console.log(response);setInvoices(response.data.invoices);}).catch(function(error){console.error('error: ',error);});};useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"invoice-container\",children:[invoices.map(function(invoice,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"invoice-id-label\",children:[\"Invoice ID: \",invoice.invoice.invoiceID]}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantID}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantLocNumber}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantAddress}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.recipientID}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-button\",onClick:function onClick(){return setPage(false);},children:\"Items\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toggle-button\",onClick:function onClick(){return setPage(true);},children:\"History\"}),!historyPage&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"item-list-container-expanded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-list-expanded\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Items:\"}),invoice.items.map(function(item,itemIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"ind-item-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),item.returned&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"returned-label\",children:\"RETURNED\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"returned-funds\",children:[\"-\",item.price]})]})]},itemIndex);})]})})})]},index);}),historyPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-history-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"History:\"}),(_invoices$=invoices[0])===null||_invoices$===void 0?void 0:_invoices$.invoice.transactionHistory.map(function(i,iIndex){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"ind-item-block\",children:i})},iIndex);})]})]});};export default Invoice;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","Cookies","jsxs","_jsxs","jsx","_jsx","Invoice","_invoices$","_useParams","invoiceID","_useState","_useState2","_slicedToArray","invoices","setInvoices","_useState3","_useState4","historyPage","setPage","data","JSON","parse","get","e","console","log","editReceipt","action","recipientID","sharedWith","arguments","length","undefined","itemName","returner","token","post","headers","Authorization","concat","then","response","fetchData","catch","error","params","type","query","className","children","map","invoice","index","Fragment","merchantID","merchantLocNumber","merchantAddress","onClick","items","item","itemIndex","name","returned","price","transactionHistory","i","iIndex"],"sources":["C:/Users/Jackson/Desktop/OR-Localsave/frontend/onereturnfe/src/pages/app/Invoice.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport \"./wallet.css\";\r\n\r\nconst Invoice = () => {\r\n\r\n    const { invoiceID } = useParams();\r\n    const [invoices, setInvoices] = useState([]);\r\n    const [historyPage, setPage] = useState(false)\r\n\r\n\r\n    let data;\r\n    try {\r\n        data = JSON.parse(Cookies.get('data'));\r\n    } catch (e) {\r\n        console.log(\"error parsing cookie: \", e);\r\n        data = {};\r\n    }\r\n\r\n    const editReceipt = (action, invoiceID, recipientID, sharedWith='', itemName='', returner='') => {\r\n        const token = Cookies.get('token');\r\n        console.log(sharedWith);\r\n        axios\r\n        .post(\r\n            'https://onereturn.com/userapi/edit/',\r\n            {\r\n              action: action,\r\n              invoiceID: invoiceID,\r\n              recipientID: recipientID,\r\n              sharedWith: sharedWith,\r\n              itemName: itemName,\r\n              returner: returner\r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: `Token ${token}`,\r\n              },\r\n            }\r\n          )\r\n          .then((response) => {\r\n            console.log(response);\r\n            fetchData();\r\n            console.log(\"current version updated\")\r\n          })\r\n          .catch((error) => {\r\n            console.error('error: ', error);\r\n          });\r\n      };\r\n\r\n\r\n    const fetchData = () => {\r\n        const token = Cookies.get('token');\r\n        axios.get('https://onereturn.com/userapi/get/', {\r\n            params: {\r\n                type: 'SINGLE',\r\n                query: invoiceID\r\n            },\r\n            headers: {\r\n                'Authorization': \"Token \" + token\r\n            }\r\n        })\r\n        .then((response) => {\r\n            console.log(response);\r\n            setInvoices(response.data.invoices)\r\n        })\r\n        .catch((error) => {\r\n            console.error('error: ', error);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n     }, []);\r\n      \r\n     return (\r\n        <div className=\"invoice-container\">\r\n            {invoices.map((invoice, index) => (\r\n                <React.Fragment key={index}>\r\n                        <h2 className=\"invoice-id-label\">Invoice ID: {invoice.invoice.invoiceID}</h2>\r\n                        <h3>{invoice.invoice.merchantID}</h3>\r\n                        <h3>{invoice.invoice.merchantLocNumber}</h3>\r\n                        <h3>{invoice.invoice.merchantAddress}</h3>\r\n                        <h3>{invoice.invoice.recipientID}</h3>\r\n                        <button className=\"toggle-button\" onClick={() => setPage(false)}>Items</button>\r\n                        <button className=\"toggle-button\" onClick={() => setPage(true)}>History</button>\r\n                    {!historyPage && (\r\n                        <div>\r\n                            <div className=\"item-list-container-expanded\">\r\n                                <div className=\"item-list-expanded\">\r\n                                    <h2>Items:</h2>\r\n                                    {invoice.items.map((item, itemIndex) => (\r\n                                        <div key={itemIndex} className=\"ind-item-block\">\r\n                                            <h3>{item.name}</h3>\r\n                                            {item.returned && (\r\n                                                <div>\r\n                                                    <p className=\"returned-label\">RETURNED</p>\r\n                                                    <p className=\"returned-funds\">-{item.price}</p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </React.Fragment>\r\n            ))}\r\n            {historyPage && ( \r\n                <div className=\"transaction-history-container\">\r\n                    <h2>History:</h2>\r\n                    {invoices[0]?.invoice.transactionHistory.map((i, iIndex) => (\r\n                        <div key={iIndex}>\r\n                            <h3 className=\"ind-item-block\">{i}</h3>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );    \r\n}\r\n\r\nexport default Invoice;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}