{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import Cookies from\"js-cookie\";import\"./wallet.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const BACKEND=process.env.REACT_APP_BACKEND;const Invoice=_ref=>{var _invoices$;let{invoiceID}=_ref;const[invoices,setInvoices]=useState([]);const[historyPage,setPage]=useState(false);let data;try{data=JSON.parse(Cookies.get('data'));}catch(e){console.log(\"error parsing cookie: \",e);data={};}const editReceipt=function(action,invoiceID,recipientID){let sharedWith=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';let itemName=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';let returner=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'';const token=Cookies.get('token');console.log(sharedWith);axios.post(BACKEND+'/edit/',{action:action,invoiceID:invoiceID,recipientID:recipientID,sharedWith:sharedWith,itemName:itemName,returner:returner},{headers:{Authorization:\"Token \".concat(token)}}).then(response=>{console.log(response);fetchData();console.log(\"current version updated\");}).catch(error=>{console.error('error: ',error);});};const fetchData=invoiceID=>{const token=Cookies.get('token');axios.get(BACKEND+'/get/',{params:{'method':'SINGLE','query':invoiceID},headers:{'Authorization':\"Token \"+token}}).then(response=>{console.log(response);setInvoices(response.data.invoices);}).catch(error=>{console.error('error: ',error);});};useEffect(()=>{fetchData(invoiceID);},[invoiceID]);return/*#__PURE__*/_jsxs(\"div\",{className:\"invoice-container\",children:[invoices.map((invoice,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detailed-invoice-info\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"invoice-id-label\",children:[\"Invoice ID: \",invoice.invoice.invoiceID]}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantID}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantLocNumber}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantAddress}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.recipientID})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"toggle-button\",onClick:()=>setPage(false),children:\"Items\"}),/*#__PURE__*/_jsx(\"button\",{id:\"toggle-button\",onClick:()=>setPage(true),children:\"History\"})]}),!historyPage&&/*#__PURE__*/_jsx(\"div\",{className:\"item-list-container-expanded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-list-expanded\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Items:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"items\",children:invoice.items.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"ind-item-block\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[item.name,\": $\",item.price]}),item.returned&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"returned-label\",children:\"RETURNED\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"returned-funds\",children:[\"-\",item.price]})]})]},itemIndex))})]})})]},index)),historyPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-history-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"History:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"items\",children:(_invoices$=invoices[0])===null||_invoices$===void 0?void 0:_invoices$.invoice.transactionHistory.map((i,iIndex)=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"ind-item-block\",children:i})},iIndex))})]})]});};export default Invoice;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","Cookies","jsxs","_jsxs","jsx","_jsx","BACKEND","process","env","REACT_APP_BACKEND","Invoice","_ref","_invoices$","invoiceID","invoices","setInvoices","historyPage","setPage","data","JSON","parse","get","e","console","log","editReceipt","action","recipientID","sharedWith","arguments","length","undefined","itemName","returner","token","post","headers","Authorization","concat","then","response","fetchData","catch","error","params","className","children","map","invoice","index","Fragment","merchantID","merchantLocNumber","merchantAddress","id","onClick","items","item","itemIndex","name","price","returned","transactionHistory","i","iIndex"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/app/Invoice.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport \"./wallet.css\";\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\n\r\nconst Invoice = ({invoiceID}) => {\r\n    \r\n    const [invoices, setInvoices] = useState([]);\r\n    const [historyPage, setPage] = useState(false)\r\n\r\n\r\n    let data;\r\n    try {\r\n        data = JSON.parse(Cookies.get('data'));\r\n    } catch (e) {\r\n        console.log(\"error parsing cookie: \", e);\r\n        data = {};\r\n    }\r\n\r\n    const editReceipt = (action, invoiceID, recipientID, sharedWith='', itemName='', returner='') => {\r\n        const token = Cookies.get('token');\r\n        console.log(sharedWith);\r\n        axios\r\n        .post(BACKEND+'/edit/',\r\n            {\r\n              action: action,\r\n              invoiceID: invoiceID,\r\n              recipientID: recipientID,\r\n              sharedWith: sharedWith,\r\n              itemName: itemName,\r\n              returner: returner\r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: `Token ${token}`,\r\n              },\r\n            }\r\n          )\r\n          .then((response) => {\r\n            console.log(response);\r\n            fetchData();\r\n            console.log(\"current version updated\")\r\n          })\r\n          .catch((error) => {\r\n            console.error('error: ', error);\r\n          });\r\n      };\r\n\r\n\r\n    const fetchData = (invoiceID) => {\r\n        const token = Cookies.get('token');\r\n        axios.get(BACKEND+'/get/', {\r\n            params: {\r\n                'method': 'SINGLE',\r\n                'query': invoiceID,\r\n            },\r\n            headers: {\r\n                'Authorization': \"Token \" + token\r\n            }\r\n        })\r\n        .then((response) => {\r\n            console.log(response);\r\n            setInvoices(response.data.invoices)\r\n        })\r\n        .catch((error) => {\r\n            console.error('error: ', error);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData(invoiceID);\r\n     }, [invoiceID]);\r\n      \r\n     return (\r\n        <div className=\"invoice-container\">\r\n            {invoices.map((invoice, index) => (\r\n                <React.Fragment key={index}>\r\n                    <div className=\"detailed-invoice-info\">\r\n                        <h2 className=\"invoice-id-label\">Invoice ID: {invoice.invoice.invoiceID}</h2>\r\n                        <h3>{invoice.invoice.merchantID}</h3>\r\n                        <h3>{invoice.invoice.merchantLocNumber}</h3>\r\n                        <h3>{invoice.invoice.merchantAddress}</h3>\r\n                        <h3>{invoice.invoice.recipientID}</h3>\r\n                    </div>\r\n                    <div className=\"buttons-container\">\r\n                        <button id=\"toggle-button\" onClick={() => setPage(false)}>Items</button>\r\n                        <button id=\"toggle-button\" onClick={() => setPage(true)}>History</button>\r\n                    </div>\r\n                    {!historyPage && (\r\n                            <div className=\"item-list-container-expanded\">\r\n                                <div className=\"item-list-expanded\">\r\n                                    <h2>Items:</h2>\r\n                                    <div id=\"items\">\r\n                                        {invoice.items.map((item, itemIndex) => (\r\n                                            <div key={itemIndex} className=\"ind-item-block\">\r\n                                                <h3>{item.name}: ${item.price}</h3>\r\n                                                {item.returned && (\r\n                                                    <div>\r\n                                                        <p className=\"returned-label\">RETURNED</p>\r\n                                                        <p className=\"returned-funds\">-{item.price}</p>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                    )}\r\n                </React.Fragment>\r\n            ))}\r\n                    {historyPage && ( \r\n                        <div className=\"transaction-history-container\">\r\n                            <h2>History:</h2>\r\n                            <div id=\"items\">\r\n                                {invoices[0]?.invoice.transactionHistory.map((i, iIndex) => (\r\n                                    <div key={iIndex}>\r\n                                        <h3 className=\"ind-item-block\">{i}</h3>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            );    \r\n}\r\n\r\nexport default Invoice;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}