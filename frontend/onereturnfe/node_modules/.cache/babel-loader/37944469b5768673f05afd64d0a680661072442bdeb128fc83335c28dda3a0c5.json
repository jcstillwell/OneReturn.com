{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jackson/Desktop/Backup/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jackson/Desktop/Backup/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Jackson/Desktop/Backup/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import axios from'axios';import{Route,Redirect,useNavigate,Navigate}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import Cookies from'js-cookie';import{motion}from'framer-motion';import'./styles/login.css';import\"./styles/login-register-shared.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var _useState9=useState(!!Cookies.get('token')),_useState10=_slicedToArray(_useState9,2),isAuthenticated=_useState10[0],setIsAuthenticated=_useState10[1];var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post('http://onereturn.com/userapi/authenticate/',{'email':email,'password':pass});case 4:response=_context.sent;if(response.data.status==='OK'){Cookies.set('token',response.data.token,{expires:7});Cookies.set('data',JSON.stringify(response.data.data),{expires:7});dispatch({type:'LOGIN',payload:response.data});navigate(\"/wallet\");console.log(JSON.stringify(response.data.data));setError(false);setErrorMsg('');}_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setError(true);setErrorMsg(_context.t0.response.data.message);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(motion.div,{className:\"auth-form-container\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0.08},children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome back.\"}),error&&/*#__PURE__*/_jsx(\"label\",{className:\"error-message\",children:errorMsg}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"youremail@domain.com\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:pass,onChange:function onChange(e){return setPass(e.target.value);},type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:function onClick(){return navigate(\"/preregister\");},children:\"Haven't made an account yet? Register here.\"})]});};export default Login;","map":{"version":3,"names":["React","useContext","useState","axios","Route","Redirect","useNavigate","Navigate","AuthContext","Cookies","motion","jsx","_jsx","jsxs","_jsxs","Login","props","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pass","setPass","_useState5","_useState6","error","setError","_useState7","_useState8","errorMsg","setErrorMsg","_useState9","get","_useState10","isAuthenticated","setIsAuthenticated","_useContext","dispatch","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","data","status","set","token","expires","JSON","stringify","type","payload","console","log","t0","message","stop","_x","apply","arguments","div","className","initial","opacity","animate","exit","transition","duration","children","onSubmit","htmlFor","value","onChange","target","placeholder","onClick"],"sources":["C:/Users/Jackson/Desktop/Backup/frontend/onereturnfe/src/pages/auth/Login.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport axios from 'axios';\nimport { Route, Redirect, useNavigate, Navigate } from 'react-router-dom';\nimport { AuthContext } from '../../context/AuthContext';\nimport Cookies from 'js-cookie';\nimport { motion } from 'framer-motion';\nimport './styles/login.css'\nimport \"./styles/login-register-shared.css\"\n\nconst Login = (props) =>\n{\n    const [email, setEmail] = useState('');\n    const [pass, setPass] = useState('');\n    const [error, setError] = useState(false);\n    const [errorMsg, setErrorMsg] = useState('');\n    const [isAuthenticated, setIsAuthenticated] = useState(!!Cookies.get('token'))\n    const { dispatch } = useContext(AuthContext);\n    let navigate = useNavigate();\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        \n        try {\n            const response = await axios.post('http://onereturn.com/userapi/authenticate/', {\n                'email':email,\n                'password':pass,\n            });\n\n            if (response.data.status === 'OK') {\n                Cookies.set('token', response.data.token, {expires: 7});\n                Cookies.set('data', JSON.stringify(response.data.data), {expires: 7});\n                dispatch({type: 'LOGIN', payload: response.data});\n                navigate(\"/wallet\");\n                console.log(JSON.stringify(response.data.data));\n                setError(false);\n                setErrorMsg('');\n            }\n        } catch (error) {\n            console.log(error);\n            setError(true);\n            setErrorMsg(error.response.data.message);\n        }\n\n    }\n\n    return (\n        <motion.div \n            className='auth-form-container'\n            initial={{opacity: 0}}\n            animate={{opacity: 1}}\n            exit={{opacity: 0}}\n            transition={{duration: 0.08}}\n        >\n            <form className='login-form' onSubmit={handleSubmit}>\n                <p>Welcome back.</p>\n                {error && (\n                    <label className='error-message'>{errorMsg}</label>\n                )}\n                <label htmlFor=\"email\">Email</label>\n                <input value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" placeholder=\"youremail@domain.com\"/>\n                <label htmlFor=\"password\">Password</label>\n                <input value={pass} onChange={(e) => setPass(e.target.value)} type=\"password\" placeholder='Password'/>\n                <button type=\"submit\">Log In</button>\n            </form>\n            <button className='link-btn' onClick={() => navigate(\"/preregister\")}>Haven't made an account yet? Register here.</button>\n        </motion.div>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}