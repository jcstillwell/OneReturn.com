{"ast":null,"code":"import axios from\"axios\";import React,{useState,useEffect,useContext}from\"react\";import{NavbarVisContext}from\"../../context/NavbarVisContext\";import{jsx as _jsx}from\"react/jsx-runtime\";const BACKEND=process.env.REACT_APP_BACKEND;const Verify=()=>{const urlParams=new URLSearchParams(window.location.search);const token=urlParams.get('token');const[isVerified,setIsVerified]=useState(false);const[successMsg,setSuccessMsg]=useState('');const[error,setError]=useState(false);const[errorMsg,setErrorMsg]=useState('');const{isVisible,setIsVisible}=useContext(NavbarVisContext);useEffect(()=>{setIsVisible(false);const verifyToken=async()=>{try{const response=await axios.post(BACKEND+'/verify/',{'token':token});if(response.data.status==='OK'){setIsVerified(true);setSuccessMsg(response.data.message);console.log(\"success section, no axios error\"+response.data.message);console.log(\"success msg:\"+successMsg);console.log(\"Error msg:\"+errorMsg);}else{setError(true);setErrorMsg(response.data.message);console.log(\"else section, no axios error: \"+response.data.message);console.log(\"Error msg:\"+errorMsg);console.log(\"success msg:\"+successMsg);}}catch(error){var _error$response,_error$response$data;console.error(error);setError(true);setErrorMsg(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"An error occurred\");}};verifyToken();},[token]);if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:errorMsg})});}else if(isVerified){return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:successMsg})});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:\"Please wait on this page until your email address is verified.\"})});}};export default Verify;","map":{"version":3,"names":["axios","React","useState","useEffect","useContext","NavbarVisContext","jsx","_jsx","BACKEND","process","env","REACT_APP_BACKEND","Verify","urlParams","URLSearchParams","window","location","search","token","get","isVerified","setIsVerified","successMsg","setSuccessMsg","error","setError","errorMsg","setErrorMsg","isVisible","setIsVisible","verifyToken","response","post","data","status","message","console","log","_error$response","_error$response$data","className","children"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/auth/Verify.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { NavbarVisContext } from \"../../context/NavbarVisContext\";\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\n\r\nconst Verify = () => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const token = urlParams.get('token');\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [successMsg, setSuccessMsg] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const { isVisible, setIsVisible } = useContext(NavbarVisContext)\r\n\r\n    useEffect(() => {\r\n        setIsVisible(false);\r\n        const verifyToken = async () => {\r\n            try {\r\n                const response = await axios.post(BACKEND+'/verify/', {\r\n                    'token':token\r\n                });\r\n\r\n                if (response.data.status === 'OK') {\r\n                    setIsVerified(true);\r\n                    setSuccessMsg(response.data.message);\r\n                    console.log(\"success section, no axios error\" + response.data.message);\r\n                    console.log(\"success msg:\" + successMsg);\r\n                    console.log(\"Error msg:\" + errorMsg);\r\n                } else {\r\n                    setError(true);\r\n                    setErrorMsg(response.data.message);\r\n                    console.log(\"else section, no axios error: \" + response.data.message);\r\n                    console.log(\"Error msg:\" + errorMsg);\r\n                    console.log(\"success msg:\" + successMsg);\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n                setError(true);\r\n                setErrorMsg(error.response?.data?.message || \"An error occurred\");\r\n            }\r\n        };\r\n\r\n        verifyToken();\r\n    }, [token]);\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">{errorMsg}</h1>\r\n            </div>\r\n        );\r\n    } else if (isVerified) {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">{successMsg}</h1>\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">Please wait on this page until your email address is verified.</h1>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Verify;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}