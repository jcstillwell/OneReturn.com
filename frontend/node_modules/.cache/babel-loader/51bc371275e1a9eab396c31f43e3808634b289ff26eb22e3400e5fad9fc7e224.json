{"ast":null,"code":"import _regeneratorRuntime from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useState,useEffect,useContext}from\"react\";import{NavbarVisContext}from\"../../context/NavbarVisContext\";import{jsx as _jsx}from\"react/jsx-runtime\";var BACKEND=process.env.REACT_APP_BACKEND;var Verify=function Verify(){var urlParams=new URLSearchParams(window.location.search);var token=urlParams.get('token');var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isVerified=_useState2[0],setIsVerified=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),successMsg=_useState4[0],setSuccessMsg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var _useContext=useContext(NavbarVisContext),isVisible=_useContext.isVisible,setIsVisible=_useContext.setIsVisible;useEffect(function(){setIsVisible(false);var verifyToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_error$response,_error$response$data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(BACKEND+'/verify/',{'token':token});case 3:response=_context.sent;if(response.data.status==='OK'){setIsVerified(true);setSuccessMsg(response.data.message);console.log(\"success section, no axios error\"+response.data.message);console.log(\"success msg:\"+successMsg);console.log(\"Error msg:\"+errorMsg);}else{setError(true);setErrorMsg(response.data.message);console.log(\"else section, no axios error: \"+response.data.message);console.log(\"Error msg:\"+errorMsg);console.log(\"success msg:\"+successMsg);}_context.next=12;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);setError(true);setErrorMsg(((_error$response=_context.t0.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"An error occurred\");case 12:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function verifyToken(){return _ref.apply(this,arguments);};}();verifyToken();},[token]);if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:errorMsg})});}else if(isVerified){return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:successMsg})});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"status\",children:\"Please wait on this page until your email address is verified.\"})});}};export default Verify;","map":{"version":3,"names":["axios","React","useState","useEffect","useContext","NavbarVisContext","jsx","_jsx","BACKEND","process","env","REACT_APP_BACKEND","Verify","urlParams","URLSearchParams","window","location","search","token","get","_useState","_useState2","_slicedToArray","isVerified","setIsVerified","_useState3","_useState4","successMsg","setSuccessMsg","_useState5","_useState6","error","setError","_useState7","_useState8","errorMsg","setErrorMsg","_useContext","isVisible","setIsVisible","verifyToken","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_error$response","_error$response$data","wrap","_callee$","_context","prev","next","post","sent","data","status","message","console","log","t0","stop","apply","arguments","className","children"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/auth/Verify.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { NavbarVisContext } from \"../../context/NavbarVisContext\";\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\n\r\nconst Verify = () => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const token = urlParams.get('token');\r\n    const [isVerified, setIsVerified] = useState(false);\r\n    const [successMsg, setSuccessMsg] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const { isVisible, setIsVisible } = useContext(NavbarVisContext)\r\n\r\n    useEffect(() => {\r\n        setIsVisible(false);\r\n        const verifyToken = async () => {\r\n            try {\r\n                const response = await axios.post(BACKEND+'/verify/', {\r\n                    'token':token\r\n                });\r\n\r\n                if (response.data.status === 'OK') {\r\n                    setIsVerified(true);\r\n                    setSuccessMsg(response.data.message);\r\n                    console.log(\"success section, no axios error\" + response.data.message);\r\n                    console.log(\"success msg:\" + successMsg);\r\n                    console.log(\"Error msg:\" + errorMsg);\r\n                } else {\r\n                    setError(true);\r\n                    setErrorMsg(response.data.message);\r\n                    console.log(\"else section, no axios error: \" + response.data.message);\r\n                    console.log(\"Error msg:\" + errorMsg);\r\n                    console.log(\"success msg:\" + successMsg);\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n                setError(true);\r\n                setErrorMsg(error.response?.data?.message || \"An error occurred\");\r\n            }\r\n        };\r\n\r\n        verifyToken();\r\n    }, [token]);\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">{errorMsg}</h1>\r\n            </div>\r\n        );\r\n    } else if (isVerified) {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">{successMsg}</h1>\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div className=\"main\">\r\n                <h1 className=\"status\">Please wait on this page until your email address is verified.</h1>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Verify;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}