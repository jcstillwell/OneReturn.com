{"ast":null,"code":"import _slicedToArray from\"C:/Users/Jackson/Desktop/OR-Localsave/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import Cookies from\"js-cookie\";import\"./wallet.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Invoice=function Invoice(){var _useParams=useParams(),invoiceID=_useParams.invoiceID;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),invoices=_useState2[0],setInvoices=_useState2[1];var data;try{data=JSON.parse(Cookies.get('data'));}catch(e){console.log(\"error parsing cookie: \",e);data={};}var editReceipt=function editReceipt(action,invoiceID,recipientID){var sharedWith=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var itemName=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';var returner=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'';var token=Cookies.get('token');console.log(sharedWith);axios.post('http://localhost:8000/edit/',{action:action,invoiceID:invoiceID,recipientID:recipientID,sharedWith:sharedWith,itemName:itemName,returner:returner},{headers:{Authorization:\"Token \".concat(token)}}).then(function(response){console.log(response);fetchData();console.log(\"current version updated\");}).catch(function(error){console.error('error: ',error);});};var fetchData=function fetchData(){var token=Cookies.get('token');axios.get('http://localhost:8000/get/',{params:{type:'SINGLE',query:invoiceID},headers:{'Authorization':\"Token \"+token}}).then(function(response){console.log(response);setInvoices(response.data.invoices);}).catch(function(error){console.error('error: ',error);});};useEffect(function(){fetchData();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"invoice-container\",children:invoices.map(function(invoice,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"invoice-id-label\",children:invoice.invoice.invoiceID}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantID}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantLocNumber}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantAddress}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.recipientID}),/*#__PURE__*/_jsx(\"div\",{className:\"item-list-container-expanded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-list-expanded\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Items:\"}),invoice.items.map(function(item,itemIndex){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-arrow-left fa-2xl\",onClick:function onClick(){return editReceipt('RETURN',invoice.invoice.invoiceID,invoice.invoice.recipientID,'',item.name,data.uuid);}}),/*#__PURE__*/_jsx(\"h3\",{children:item.name}),item.returned&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"returned-label\",children:\"RETURNED\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"returned-funds\",children:[\"-\",item.price]})]})]},itemIndex);})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-history-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"History:\"}),invoice.invoice.transactionHistory.map(function(i,iIndex){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{children:i})},iIndex);})]})]},index);})});};export default Invoice;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","Cookies","jsx","_jsx","jsxs","_jsxs","Invoice","_useParams","invoiceID","_useState","_useState2","_slicedToArray","invoices","setInvoices","data","JSON","parse","get","e","console","log","editReceipt","action","recipientID","sharedWith","arguments","length","undefined","itemName","returner","token","post","headers","Authorization","concat","then","response","fetchData","catch","error","params","type","query","className","children","map","invoice","index","merchantID","merchantLocNumber","merchantAddress","items","item","itemIndex","class","onClick","name","uuid","returned","price","transactionHistory","i","iIndex"],"sources":["C:/Users/Jackson/Desktop/OR-Localsave/frontend/onereturnfe/src/pages/app/Invoice.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport \"./wallet.css\";\n\nconst Invoice = () => {\n\n    const { invoiceID } = useParams();\n    const [invoices, setInvoices] = useState([]);\n\n\n    let data;\n    try {\n        data = JSON.parse(Cookies.get('data'));\n    } catch (e) {\n        console.log(\"error parsing cookie: \", e);\n        data = {};\n    }\n\n    const editReceipt = (action, invoiceID, recipientID, sharedWith='', itemName='', returner='') => {\n        const token = Cookies.get('token');\n        console.log(sharedWith);\n        axios\n        .post(\n            'http://localhost:8000/edit/',\n            {\n              action: action,\n              invoiceID: invoiceID,\n              recipientID: recipientID,\n              sharedWith: sharedWith,\n              itemName: itemName,\n              returner: returner\n            },\n            {\n              headers: {\n                Authorization: `Token ${token}`,\n              },\n            }\n          )\n          .then((response) => {\n            console.log(response);\n            fetchData();\n            console.log(\"current version updated\")\n          })\n          .catch((error) => {\n            console.error('error: ', error);\n          });\n      };\n\n\n    const fetchData = () => {\n        const token = Cookies.get('token');\n        axios.get('http://localhost:8000/get/', {\n            params: {\n                type: 'SINGLE',\n                query: invoiceID\n            },\n            headers: {\n                'Authorization': \"Token \" + token\n            }\n        })\n        .then((response) => {\n            console.log(response);\n            setInvoices(response.data.invoices)\n        })\n        .catch((error) => {\n            console.error('error: ', error);\n        });\n    }\n\n    useEffect(() => {\n        fetchData();\n     }, []);\n      \n     return (\n        <div className=\"invoice-container\">\n          {invoices.map((invoice, index) => (\n                <div key={index}>\n                    <h2 className=\"invoice-id-label\">{invoice.invoice.invoiceID}</h2>\n                    <h3>{invoice.invoice.merchantID}</h3>\n                    <h3>{invoice.invoice.merchantLocNumber}</h3>\n                    <h3>{invoice.invoice.merchantAddress}</h3>\n                    <h3>{invoice.invoice.recipientID}</h3>\n                <div className=\"item-list-container-expanded\">\n                    <div className=\"item-list-expanded\">\n                        <h2>Items:</h2>\n                        {invoice.items.map((item, itemIndex) => (\n                            <div key={itemIndex}>\n                                <i class=\"fa-solid fa-arrow-left fa-2xl\" \n                                onClick={() => editReceipt('RETURN', invoice.invoice.invoiceID, invoice.invoice.recipientID, '', item.name, data.uuid)}></i>\n                                <h3>{item.name}</h3>\n                                {item.returned && (\n                                <div>\n                                    <p className=\"returned-label\">RETURNED</p>\n                                    <p className=\"returned-funds\">-{item.price}</p>\n                                </div>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n              </div>\n              <div className=\"transaction-history-container\">\n                    <h2>History:</h2>\n                    {invoice.invoice.transactionHistory.map((i, iIndex) => (\n                            <div key={iIndex}>\n                                <h3>{i}</h3>\n                            </div>\n                    ))}\n              </div>\n            </div>\n          ))}\n        </div>\n    );\n}\n\nexport default Invoice;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}