{"ast":null,"code":"import React,{useContext,useState}from'react';import axios from'axios';import{Route,Redirect,useNavigate,Navigate}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import Cookies from'js-cookie';import{motion}from'framer-motion';import'./styles/login.css';import\"./styles/login-register-shared.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND=process.env.REACT_APP_BACKEND;console.log(process.env.REACT_APP_BACKEND);const Login=props=>{const[email,setEmail]=useState('');const[pass,setPass]=useState('');const[error,setError]=useState(false);const[errorMsg,setErrorMsg]=useState('');const[isAuthenticated,setIsAuthenticated]=useState(!!Cookies.get('token'));const{dispatch}=useContext(AuthContext);let navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post(BACKEND+'/authenticate/',{'email':email,'password':pass});if(response.data.status==='OK'){Cookies.set('token',response.data.token,{expires:7});Cookies.set('data',JSON.stringify(response.data.data),{expires:7});dispatch({type:'LOGIN',payload:response.data});navigate(\"/wallet\");console.log(JSON.stringify(response.data.data));//Remove this!\nsetError(false);setErrorMsg('');}}catch(error){console.log(error);//Remove this!\nsetError(true);setErrorMsg(error.response.data.message);}};return/*#__PURE__*/_jsxs(motion.div,{className:\"auth-form-container\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0.08},children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome back.\"}),error&&/*#__PURE__*/_jsx(\"label\",{className:\"error-message\",children:errorMsg}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),type:\"email\",placeholder:\"youremail@domain.com\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:pass,onChange:e=>setPass(e.target.value),type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:()=>navigate(\"/preregister\"),children:\"Haven't made an account yet? Register here.\"})]});};export default Login;","map":{"version":3,"names":["React","useContext","useState","axios","Route","Redirect","useNavigate","Navigate","AuthContext","Cookies","motion","jsx","_jsx","jsxs","_jsxs","BACKEND","process","env","REACT_APP_BACKEND","console","log","Login","props","email","setEmail","pass","setPass","error","setError","errorMsg","setErrorMsg","isAuthenticated","setIsAuthenticated","get","dispatch","navigate","handleSubmit","e","preventDefault","response","post","data","status","set","token","expires","JSON","stringify","type","payload","message","div","className","initial","opacity","animate","exit","transition","duration","children","onSubmit","htmlFor","value","onChange","target","placeholder","onClick"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/auth/Login.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Route, Redirect, useNavigate, Navigate } from 'react-router-dom';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport Cookies from 'js-cookie';\r\nimport { motion } from 'framer-motion';\r\nimport './styles/login.css'\r\nimport \"./styles/login-register-shared.css\"\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\nconsole.log(process.env.REACT_APP_BACKEND);\r\n\r\nconst Login = (props) =>\r\n{\r\n    const [email, setEmail] = useState('');\r\n    const [pass, setPass] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const [isAuthenticated, setIsAuthenticated] = useState(!!Cookies.get('token'));\r\n    const { dispatch } = useContext(AuthContext);\r\n    let navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            const response = await axios.post((BACKEND+'/authenticate/'), {\r\n                'email':email,\r\n                'password':pass,\r\n            });\r\n\r\n            if (response.data.status === 'OK') {\r\n                Cookies.set('token', response.data.token, {expires: 7});\r\n                Cookies.set('data', JSON.stringify(response.data.data), {expires: 7});\r\n                dispatch({type: 'LOGIN', payload: response.data});\r\n                navigate(\"/wallet\");\r\n                console.log(JSON.stringify(response.data.data)); //Remove this!\r\n                setError(false);\r\n                setErrorMsg('');\r\n            }\r\n        } catch (error) {\r\n            console.log(error); //Remove this!\r\n            setError(true);\r\n            setErrorMsg(error.response.data.message);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <motion.div \r\n            className='auth-form-container'\r\n            initial={{opacity: 0}}\r\n            animate={{opacity: 1}}\r\n            exit={{opacity: 0}}\r\n            transition={{duration: 0.08}}\r\n        >\r\n            <form className='login-form' onSubmit={handleSubmit}>\r\n                <p>Welcome back.</p>\r\n                {error && (\r\n                    <label className='error-message'>{errorMsg}</label>\r\n                )}\r\n                <label htmlFor=\"email\">Email</label>\r\n                <input value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" placeholder=\"youremail@domain.com\"/>\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input value={pass} onChange={(e) => setPass(e.target.value)} type=\"password\" placeholder='Password'/>\r\n                <button type=\"submit\">Log In</button>\r\n            </form>\r\n            <button className='link-btn' onClick={() => navigate(\"/preregister\")}>Haven't made an account yet? Register here.</button>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}