{"ast":null,"code":"import _regeneratorRuntime from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import axios from'axios';import{Route,Redirect,useNavigate,Navigate}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import Cookies from'js-cookie';import{motion}from'framer-motion';import'./styles/login.css';import\"./styles/login-register-shared.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BACKEND=process.env.REACT_APP_BACKEND;console.log(process.env.REACT_APP_BACKEND);var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pass=_useState4[0],setPass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMsg=_useState8[0],setErrorMsg=_useState8[1];var _useState9=useState(!!Cookies.get('token')),_useState10=_slicedToArray(_useState9,2),isAuthenticated=_useState10[0],setIsAuthenticated=_useState10[1];var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(BACKEND+'/authenticate/',{'email':email,'password':pass});case 4:response=_context.sent;if(response.data.status==='OK'){Cookies.set('token',response.data.token,{expires:7});Cookies.set('data',JSON.stringify(response.data.data),{expires:7});dispatch({type:'LOGIN',payload:response.data});navigate(\"/wallet\");console.log(JSON.stringify(response.data.data));//Remove this!\nsetError(false);setErrorMsg('');}_context.next=13;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);//Remove this!\nsetError(true);setErrorMsg(_context.t0.response.data.message);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(motion.div,{className:\"auth-form-container\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:0.08},children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome back.\"}),error&&/*#__PURE__*/_jsx(\"label\",{className:\"error-message\",children:errorMsg}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"youremail@domain.com\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:pass,onChange:function onChange(e){return setPass(e.target.value);},type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:function onClick(){return navigate(\"/preregister\");},children:\"Haven't made an account yet? Register here.\"})]});};export default Login;","map":{"version":3,"names":["React","useContext","useState","axios","Route","Redirect","useNavigate","Navigate","AuthContext","Cookies","motion","jsx","_jsx","jsxs","_jsxs","BACKEND","process","env","REACT_APP_BACKEND","console","log","Login","props","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pass","setPass","_useState5","_useState6","error","setError","_useState7","_useState8","errorMsg","setErrorMsg","_useState9","get","_useState10","isAuthenticated","setIsAuthenticated","_useContext","dispatch","navigate","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","wrap","_callee$","_context","prev","next","preventDefault","post","sent","data","status","set","token","expires","JSON","stringify","type","payload","t0","message","stop","_x","apply","arguments","div","className","initial","opacity","animate","exit","transition","duration","children","onSubmit","htmlFor","value","onChange","target","placeholder","onClick"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/auth/Login.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Route, Redirect, useNavigate, Navigate } from 'react-router-dom';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport Cookies from 'js-cookie';\r\nimport { motion } from 'framer-motion';\r\nimport './styles/login.css'\r\nimport \"./styles/login-register-shared.css\"\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\nconsole.log(process.env.REACT_APP_BACKEND);\r\n\r\nconst Login = (props) =>\r\n{\r\n    const [email, setEmail] = useState('');\r\n    const [pass, setPass] = useState('');\r\n    const [error, setError] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const [isAuthenticated, setIsAuthenticated] = useState(!!Cookies.get('token'));\r\n    const { dispatch } = useContext(AuthContext);\r\n    let navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n            const response = await axios.post((BACKEND+'/authenticate/'), {\r\n                'email':email,\r\n                'password':pass,\r\n            });\r\n\r\n            if (response.data.status === 'OK') {\r\n                Cookies.set('token', response.data.token, {expires: 7});\r\n                Cookies.set('data', JSON.stringify(response.data.data), {expires: 7});\r\n                dispatch({type: 'LOGIN', payload: response.data});\r\n                navigate(\"/wallet\");\r\n                console.log(JSON.stringify(response.data.data)); //Remove this!\r\n                setError(false);\r\n                setErrorMsg('');\r\n            }\r\n        } catch (error) {\r\n            console.log(error); //Remove this!\r\n            setError(true);\r\n            setErrorMsg(error.response.data.message);\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <motion.div \r\n            className='auth-form-container'\r\n            initial={{opacity: 0}}\r\n            animate={{opacity: 1}}\r\n            exit={{opacity: 0}}\r\n            transition={{duration: 0.08}}\r\n        >\r\n            <form className='login-form' onSubmit={handleSubmit}>\r\n                <p>Welcome back.</p>\r\n                {error && (\r\n                    <label className='error-message'>{errorMsg}</label>\r\n                )}\r\n                <label htmlFor=\"email\">Email</label>\r\n                <input value={email} onChange={(e) => setEmail(e.target.value)} type=\"email\" placeholder=\"youremail@domain.com\"/>\r\n                <label htmlFor=\"password\">Password</label>\r\n                <input value={pass} onChange={(e) => setPass(e.target.value)} type=\"password\" placeholder='Password'/>\r\n                <button type=\"submit\">Log In</button>\r\n            </form>\r\n            <button className='link-btn' onClick={() => navigate(\"/preregister\")}>Haven't made an account yet? Register here.</button>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}