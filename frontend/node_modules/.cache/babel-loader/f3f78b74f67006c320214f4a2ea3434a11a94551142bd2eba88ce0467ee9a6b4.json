{"ast":null,"code":"import _slicedToArray from\"Z:/OR-dev/OR-Localdev/frontend/onereturnfe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import Cookies from\"js-cookie\";import\"./wallet.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var BACKEND=process.env.REACT_APP_BACKEND;var Invoice=function Invoice(_ref){var _invoices$;var invoiceID=_ref.invoiceID;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),invoices=_useState2[0],setInvoices=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),historyPage=_useState4[0],setPage=_useState4[1];var data;try{data=JSON.parse(Cookies.get('data'));}catch(e){console.log(\"error parsing cookie: \",e);data={};}var editReceipt=function editReceipt(action,invoiceID,recipientID){var sharedWith=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'';var itemName=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';var returner=arguments.length>5&&arguments[5]!==undefined?arguments[5]:'';var token=Cookies.get('token');console.log(sharedWith);axios.post(BACKEND+'/edit/',{action:action,invoiceID:invoiceID,recipientID:recipientID,sharedWith:sharedWith,itemName:itemName,returner:returner},{headers:{Authorization:\"Token \".concat(token)}}).then(function(response){console.log(response);fetchData();console.log(\"current version updated\");}).catch(function(error){console.error('error: ',error);});};var fetchData=function fetchData(invoiceID){var token=Cookies.get('token');axios.get(BACKEND+'/get/',{params:{'method':'SINGLE','query':invoiceID},headers:{'Authorization':\"Token \"+token}}).then(function(response){console.log(response);setInvoices(response.data.invoices);}).catch(function(error){console.error('error: ',error);});};useEffect(function(){fetchData(invoiceID);},[invoiceID]);return/*#__PURE__*/_jsxs(\"div\",{className:\"invoice-container\",children:[invoices.map(function(invoice,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detailed-invoice-info\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"invoice-id-label\",children:[\"Invoice ID: \",invoice.invoice.invoiceID]}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantID}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantLocNumber}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.merchantAddress}),/*#__PURE__*/_jsx(\"h3\",{children:invoice.invoice.recipientID})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"toggle-button\",onClick:function onClick(){return setPage(false);},children:\"Items\"}),/*#__PURE__*/_jsx(\"button\",{id:\"toggle-button\",onClick:function onClick(){return setPage(true);},children:\"History\"})]}),!historyPage&&/*#__PURE__*/_jsx(\"div\",{className:\"item-list-container-expanded\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-list-expanded\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Items:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"items\",children:invoice.items.map(function(item,itemIndex){return/*#__PURE__*/_jsxs(\"div\",{className:\"ind-item-block\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[item.name,\": $\",item.price]}),item.returned&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"returned-label\",children:\"RETURNED\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"returned-funds\",children:[\"-\",item.price]})]})]},itemIndex);})})]})})]},index);}),historyPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-history-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"History:\"}),/*#__PURE__*/_jsx(\"div\",{id:\"items\",children:(_invoices$=invoices[0])===null||_invoices$===void 0?void 0:_invoices$.invoice.transactionHistory.map(function(i,iIndex){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"ind-item-block\",children:i})},iIndex);})})]})]});};export default Invoice;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","Cookies","jsxs","_jsxs","jsx","_jsx","BACKEND","process","env","REACT_APP_BACKEND","Invoice","_ref","_invoices$","invoiceID","_useState","_useState2","_slicedToArray","invoices","setInvoices","_useState3","_useState4","historyPage","setPage","data","JSON","parse","get","e","console","log","editReceipt","action","recipientID","sharedWith","arguments","length","undefined","itemName","returner","token","post","headers","Authorization","concat","then","response","fetchData","catch","error","params","className","children","map","invoice","index","Fragment","merchantID","merchantLocNumber","merchantAddress","id","onClick","items","item","itemIndex","name","price","returned","transactionHistory","i","iIndex"],"sources":["Z:/OR-dev/OR-Localdev/frontend/onereturnfe/src/pages/app/Invoice.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport \"./wallet.css\";\r\n\r\nconst BACKEND = process.env.REACT_APP_BACKEND;\r\n\r\nconst Invoice = ({invoiceID}) => {\r\n    \r\n    const [invoices, setInvoices] = useState([]);\r\n    const [historyPage, setPage] = useState(false)\r\n\r\n\r\n    let data;\r\n    try {\r\n        data = JSON.parse(Cookies.get('data'));\r\n    } catch (e) {\r\n        console.log(\"error parsing cookie: \", e);\r\n        data = {};\r\n    }\r\n\r\n    const editReceipt = (action, invoiceID, recipientID, sharedWith='', itemName='', returner='') => {\r\n        const token = Cookies.get('token');\r\n        console.log(sharedWith);\r\n        axios\r\n        .post(BACKEND+'/edit/',\r\n            {\r\n              action: action,\r\n              invoiceID: invoiceID,\r\n              recipientID: recipientID,\r\n              sharedWith: sharedWith,\r\n              itemName: itemName,\r\n              returner: returner\r\n            },\r\n            {\r\n              headers: {\r\n                Authorization: `Token ${token}`,\r\n              },\r\n            }\r\n          )\r\n          .then((response) => {\r\n            console.log(response);\r\n            fetchData();\r\n            console.log(\"current version updated\")\r\n          })\r\n          .catch((error) => {\r\n            console.error('error: ', error);\r\n          });\r\n      };\r\n\r\n\r\n    const fetchData = (invoiceID) => {\r\n        const token = Cookies.get('token');\r\n        axios.get(BACKEND+'/get/', {\r\n            params: {\r\n                'method': 'SINGLE',\r\n                'query': invoiceID,\r\n            },\r\n            headers: {\r\n                'Authorization': \"Token \" + token\r\n            }\r\n        })\r\n        .then((response) => {\r\n            console.log(response);\r\n            setInvoices(response.data.invoices)\r\n        })\r\n        .catch((error) => {\r\n            console.error('error: ', error);\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData(invoiceID);\r\n     }, [invoiceID]);\r\n      \r\n     return (\r\n        <div className=\"invoice-container\">\r\n            {invoices.map((invoice, index) => (\r\n                <React.Fragment key={index}>\r\n                    <div className=\"detailed-invoice-info\">\r\n                        <h2 className=\"invoice-id-label\">Invoice ID: {invoice.invoice.invoiceID}</h2>\r\n                        <h3>{invoice.invoice.merchantID}</h3>\r\n                        <h3>{invoice.invoice.merchantLocNumber}</h3>\r\n                        <h3>{invoice.invoice.merchantAddress}</h3>\r\n                        <h3>{invoice.invoice.recipientID}</h3>\r\n                    </div>\r\n                    <div className=\"buttons-container\">\r\n                        <button id=\"toggle-button\" onClick={() => setPage(false)}>Items</button>\r\n                        <button id=\"toggle-button\" onClick={() => setPage(true)}>History</button>\r\n                    </div>\r\n                    {!historyPage && (\r\n                            <div className=\"item-list-container-expanded\">\r\n                                <div className=\"item-list-expanded\">\r\n                                    <h2>Items:</h2>\r\n                                    <div id=\"items\">\r\n                                        {invoice.items.map((item, itemIndex) => (\r\n                                            <div key={itemIndex} className=\"ind-item-block\">\r\n                                                <h3>{item.name}: ${item.price}</h3>\r\n                                                {item.returned && (\r\n                                                    <div>\r\n                                                        <p className=\"returned-label\">RETURNED</p>\r\n                                                        <p className=\"returned-funds\">-{item.price}</p>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                    )}\r\n                </React.Fragment>\r\n            ))}\r\n                    {historyPage && ( \r\n                        <div className=\"transaction-history-container\">\r\n                            <h2>History:</h2>\r\n                            <div id=\"items\">\r\n                                {invoices[0]?.invoice.transactionHistory.map((i, iIndex) => (\r\n                                    <div key={iIndex}>\r\n                                        <h3 className=\"ind-item-block\">{i}</h3>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            );    \r\n}\r\n\r\nexport default Invoice;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}